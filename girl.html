<!-- 이상형 월드컵 기본 html-->
<!DOCTYPE html>
<html>
<head>
	<title>이상형월드컵</title>
	<meta charset="utf-8">
	<style>
	img{
		width: 500px;
		height: 500px;
	}
	body{
		background-color: #1e1a3e;
		font-family: Arial, sans-serif;
	}
	.container1{
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
		height: 20vh;
		color: white;
		text-align: center;
		margin-top: -1.69%;
	}
	#cal {
		color: white;
	}


	.timer-bar {
	position: fixed;
	top: 0;
	left: 0;
	width: 100%;
	height: 5px;
	background-color: #000;
	}

	.timer-progress {
	height: 100%;
	background-color: #00BFFF;
	width: 100%;
	transition: width 1s linear;
	}



	</style>
</head>
<body>
	<div class="container1">
        <h3>WorldCup</h3><br>
    </div>
	<div id="wrap">
		<center id="context">
			<p id="cal"></p>
			<img id="image1" style = "opacity: 1;" >
			<img id="image2" style = "opacity: 1;" >
		</center>
	</div>

	



	<script>
	const img1 = document.getElementById("image1");
	const img2 = document.getElementById("image2");
	text ="";
	var images=[]; // 원래 넣는 배열
	var indices=[];
	var sIndices=[];
	var gameRound = 16;
	var num=0;
	var cnt=0;

	function zoomInImg1(event) {
		img1.style.width = "600px";
		img1.style.height = "600px";
		img1.style.transition = "all 0.5s";
	}

	function zoomOutImg1(event) {
		img1.style.width = "500px";
		img1.style.height = "500px";
		img1.style.transition = "all 0.5s";
	}

	function zoomInImg2(event) {
		img2.style.width = "600px";
		img2.style.height = "600px";
		img2.style.transition = "all 0.5s";
	}

	function zoomOutImg2(event) {
		img2.style.width = "500px";
		img2.style.height = "500px";
		img2.style.transition = "all 0.5s";
	}

	function fadeIn(img) {
		var opacity = 0;
		img.style.display = "block";
		var interval = setInterval(function () {
			if (opacity >= 1) {
				clearInterval(interval);
			}
			img.style.opacity = opacity;
			img.style.filter = "alpha(opacity=" + opacity * 100 + ")";
			opacity += 0.1;
		}, 50);
	}

	function fadeOut1(event) {
		var opacity = 1;
		var interval = setInterval(function () {
			if (opacity <= 0.1) {
				clearInterval(interval);
				//img1.style.display = "none";
			}
			img1.style.opacity = opacity;
			img1.style.filter = "alpha(opacity=" + opacity * 100 + ")";
			opacity -= opacity * 0.1;
		}, 50);
	}

	function fadeOut2(event) {
		var opacity = 1;
		var interval = setInterval(function () {
			if (opacity <= 0.1) {
				clearInterval(interval);
			}
			img2.style.opacity = opacity;
			img2.style.filter = "alpha(opacity=" + opacity * 100 + ")";
			opacity -= opacity * 0.1;
		}, 50);
	}

	function centerImage(img, index, total) {
	var containerWidth = img.parentElement.offsetWidth;
	var imageWidth = img.offsetWidth;
	var marginLeft = (containerWidth - (total * imageWidth)) / 2;

	img.style.position = "absolute";
	img.style.left = (marginLeft + (index * imageWidth)) + "px";
	img.style.transform = "translateX(0%)";
	img.style.margin = "auto"; // Add this line to center the image horizontally
	}


	// 이미지를 이동시키는 도우미 함수
	function slideImageLeft(img) {
		img.style.position = "fixed";
		img.style.transform = "translate(-200%, 0)";
		img.style.behavior = "smooth";
	}

	function slideImageRight(img) {
		img.style.position = "fixed";
		img.style.transform = "translate(100%, 0)";
		img.style.behavior = "smooth";
	}

	function shuffle()
	{ // 배열을 섞는다.
		if (gameRound >= 4) {
			indices.sort(function(a,b){return 0.5- Math.random()});
			text = gameRound + "강!";
		} else if (gameRound >= 2){
			text = "결승!!!";
			indices.sort(function(a,b){return 0.5- Math.random()});
		} else {
			text = "최종 우승!!!";
		}
		for(i=0; i < gameRound; i++) {
			images[i]= indices[i]+".jpg"; // 배열을 넣는다.
		}
		document.getElementById('cal').innerHTML=text;
	}

	function showImg(num){ // 사진을 보여줌.
		if(images.length == 1){
			img2.style.display='none';
		} else {
			img2.src=images[num+1];
			// id images를 배열의 +1로 대체
		}
		img1.src=images[num];
		// id image를 배열로 대체
	}

	function init() {
		for(i=0; i < gameRound; i++) {
			indices[i] = i + 1;
		}
		shuffle();
		showImg(0);
	}

	function change(n){
		sIndices[num] = indices[cnt + n];
		num++;
		cnt += 2;

		if (cnt >= gameRound) {
			indices = sIndices;
			sIndices = [];
			images = [];
			num = 0;
			cnt = 0;
			gameRound /= 2;
			shuffle();
			showImg(0);
		} else {
			showImg(cnt);
		}
	}

	init();
	// img1에 대한 줌 이벤트
	img1.addEventListener("mouseenter", zoomInImg1);
	img1.addEventListener("mouseleave", zoomOutImg1);

	// img2에 대한 줌 이벤트
	img2.addEventListener("mouseenter", zoomInImg2);
	img2.addEventListener("mouseleave", zoomOutImg2);

	// 클릭 이벤트
	img1.addEventListener("click", function (event) {
		slideImageRight(img2);
		fadeOut2(event);
    
		setTimeout(function() {
			fadeIn(img2);
			centerImage(img1,0,2);
			centerImage(img2,1,2);
			change(0);
		}, 2000);
	});

	img2.addEventListener("click", function (event) {
		slideImageLeft(img1);
		fadeOut1(event);

		setTimeout(function() {
			fadeIn(img1);
			centerImage(img1,0,2);
			centerImage(img2,1,2);
			change(1);
		}, 2000);
    
	});

	
	var timer;
	var progressBar;
	var remainingTime = 6; // Initial timer value

	function startTimer() {
	progressBar.style.width = "100%"; // Initialize the progress bar
	remainingTime = 6; // Set the initial timer value
	timer = setInterval(function() {
		if (remainingTime > 0) {
		remainingTime--; // Decrease remaining time by 1 second
		var progressWidth = (remainingTime / 6) * 100; // Calculate the width of the progress bar
		progressBar.style.width = progressWidth + "%";
		} else {
		clearInterval(timer);
		change(0); // Switch to the next picture when the timer reaches 0
		restartTimer(); // Restart the timer
		}
	}, 1000); // Update the timer every 1 second
	}

	function restartTimer() {
	clearInterval(timer);
	startTimer();
	}

	window.addEventListener("load", function() {
	progressBar = document.createElement("div");
	progressBar.classList.add("timer-bar");
	progressBar.innerHTML = '<div class="timer-progress"></div>';
	document.body.appendChild(progressBar);
	startTimer();
	});

	img1.addEventListener("click", function(event) {
	slideImageRight(img2);
	fadeOut2(event);

	setTimeout(function() {
		fadeIn(img2);
		centerImage(img1, 0, 2);
		centerImage(img2, 1, 2);
		change(0);
		restartTimer(); // Restart the timer when clicking on a picture
	}, 2000);
	});

	img2.addEventListener("click", function(event) {
	slideImageLeft(img1);
	fadeOut1(event);

	setTimeout(function() {
		fadeIn(img1);
		centerImage(img1, 0, 2);
		centerImage(img2, 1, 2);
		change(1);
		restartTimer(); // Restart the timer when clicking on a picture
	}, 2000);
	});

	
	</script>
	</body>
	
</html>


<!---<script src="func.js"></script>--->
